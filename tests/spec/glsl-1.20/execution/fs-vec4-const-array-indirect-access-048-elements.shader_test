# Test accessing a constant array with a non-constant expression.
[require]
GLSL >= 1.20


[vertex shader]
void
main()
{
	gl_Position = gl_Vertex;
}


[fragment shader]

uniform int zero;

const vec4 colors[] = vec4[](
	vec4(0.0, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 1.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(0.1, 1.1, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.1, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.1, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.1, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.1, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(1.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(1.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.1, 1.1),
	vec4(0.1, 1.0, 0.1, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.1, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.1, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(1.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.0, 1.0),
	vec4(1.0, 1.0, 0.0, 1.0),
	vec4(1.1, 1.0, 0.0, 1.0),
	vec4(0.1, 1.0, 0.1, 1.1)
);

void
main()
{
	gl_FragColor = colors[zero];
}


[test]
uniform int zero 0
draw rect -1 -1 2 2
probe all rgba 0.0 1.0 0.0 1.0
